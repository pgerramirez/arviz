
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Label guide &#8212; ArviZ dev documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.f6b7ca918bee2f46fd9abac01cfb07d5.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1e043a052b0af929e4d8.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="InferenceData schema specification" href="../schema/schema.html" />
    <link rel="prev" title="Data structures" href="data_structures.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">


    
      
      <a class="navbar-brand" href="../index.html">
        <img src="../_static/logo.png" class="logo" alt="logo">
      </a>
      
    

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    
    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../getting_started/index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../examples/index.html">
  Example Gallery
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../usage.html">
  Usage
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../contributing/index.html">
  Contributing
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../about.html">
  About
 </a>
</li>

        
      </ul>

      <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/arviz-devs/arviz" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/arviz_devs" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
  
    
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l2 current active">
  <a class="reference internal" href="data_structures.html">
   Data structures
  </a>
  <ul class="current">
   <li class="toctree-l3 current active">
    <a class="current reference internal" href="#">
     Label guide
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../schema/schema.html">
     InferenceData schema specification
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="computation.html">
   Computation
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="sampling_wrappers.html">
   Sampling wrappers
  </a>
 </li>
</ul>
  </div>
</nav>
            </div>
            
          
  


          
  
    
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-labeling">
   Basic labeling
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sorting-labels">
   Sorting labels
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sorting-variable-names">
     Sorting variable names
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sorting-coordinate-values">
     Sorting coordinate values
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sorting-dimensions">
     Sorting dimensions
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#labeling-with-indexes">
   Labeling with indexes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#labeller-mixtures">
   Labeller mixtures
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#custom-labellers">
   Custom labellers
  </a>
 </li>
</ul>

</nav>


              
          </div>
          
  


          
  
    
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="label-guide">
<span id="id1"></span><h1>Label guide<a class="headerlink" href="#label-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-labeling">
<h2>Basic labeling<a class="headerlink" href="#basic-labeling" title="Permalink to this headline">¶</a></h2>
<p>All ArviZ plotting functions and some stats functions take an optional <code class="docutils literal notranslate"><span class="pre">labeller</span></code> argument.
By default, labels show the variable name and the coordinate value
(for multidimensinal variables only).
The first example below uses this default labeling.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">arviz</span> <span class="k">as</span> <span class="nn">az</span>
<span class="gp">   ...: </span><span class="n">schools</span> <span class="o">=</span> <span class="n">az</span><span class="o">.</span><span class="n">load_arviz_data</span><span class="p">(</span><span class="s2">&quot;centered_eight&quot;</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">az</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">schools</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gh">Out[1]: </span><span class="go"></span>
<span class="go">                          mean     sd  hdi_3%  ...  ess_bulk  ess_tail  r_hat</span>
<span class="go">mu                       4.093  3.372  -2.118  ...     250.0     643.0   1.03</span>
<span class="go">theta[Choate]            6.026  5.782  -3.707  ...     348.0     743.0   1.02</span>
<span class="go">theta[Deerfield]         4.724  4.736  -4.039  ...     471.0    1018.0   1.02</span>
<span class="go">theta[Phillips Andover]  3.576  5.559  -6.779  ...     463.0     674.0   1.01</span>
<span class="go">theta[Phillips Exeter]   4.478  4.939  -5.528  ...     503.0     666.0   1.01</span>
<span class="go">theta[Hotchkiss]         3.064  4.642  -5.972  ...     380.0     833.0   1.02</span>
<span class="go">theta[Lawrenceville]     3.821  4.979  -5.507  ...     516.0    1104.0   1.02</span>
<span class="go">theta[St. Paul&#39;s]        6.250  5.436  -3.412  ...     402.0    1026.0   1.02</span>
<span class="go">theta[Mt. Hermon]        4.544  5.521  -5.665  ...     449.0    1084.0   1.01</span>
<span class="go">tau                      4.089  3.001   0.569  ...      79.0      54.0   1.07</span>

<span class="go">[10 rows x 9 columns]</span>
</pre></div>
</div>
<p>Thanks to being powered by xarray, ArviZ supports label based indexing.
We can therefore use the labels we have seen in the summary to plot only a subset of the variables,
the one we are interested in.
Provided we know that the coordinate values shown for theta correspond to the <cite>school</cite> dimension,
we can plot only <code class="docutils literal notranslate"><span class="pre">tau</span></code> to better inspect it’s 1.03 <a class="reference internal" href="../api/generated/arviz.rhat.html#arviz.rhat" title="arviz.rhat"><code class="xref py py-func docutils literal notranslate"><span class="pre">rhat()</span></code></a> and
<code class="docutils literal notranslate"><span class="pre">theta</span></code> for <code class="docutils literal notranslate"><span class="pre">Choate</span></code> and <code class="docutils literal notranslate"><span class="pre">St.</span> <span class="pre">Paul's</span></code>, the ones with higher means:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">az</span><span class="o">.</span><span class="n">plot_trace</span><span class="p">(</span><span class="n">schools</span><span class="p">,</span> <span class="n">var_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;tau&quot;</span><span class="p">,</span> <span class="s2">&quot;theta&quot;</span><span class="p">],</span> <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;school&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Choate&quot;</span><span class="p">,</span> <span class="s2">&quot;St. Paul&#39;s&quot;</span><span class="p">]},</span> <span class="n">compact</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>
</pre></div>
</div>
<img alt="../_images/label_guide_plot_trace.png" src="../_images/label_guide_plot_trace.png" />
<p>So far so good, we can identify some issues for low <code class="docutils literal notranslate"><span class="pre">tau</span></code> values which is great start.
But say we want to make a report on Deerfield, Hotchkiss and Lawrenceville schools to
see the probability of <code class="docutils literal notranslate"><span class="pre">theta</span> <span class="pre">&gt;</span> <span class="pre">5</span></code> and we have to present it somewhere with math notation.
Our default labels show <code class="docutils literal notranslate"><span class="pre">theta</span></code>, not $theta$ (generated from <code class="docutils literal notranslate"><span class="pre">$\theta$</span></code> using $LaTeX$).</p>
<p>Fear not, we can use the labeller argument to customize the labels.
The <code class="docutils literal notranslate"><span class="pre">arviz.labels</span></code> module contains some classes that cover some common customization classes.</p>
<p>In this case, we can use <a class="reference internal" href="../api/generated/arviz.labels.MapLabeller.html#arviz.labels.MapLabeller" title="arviz.labels.MapLabeller"><code class="xref py py-class docutils literal notranslate"><span class="pre">MapLabeller</span></code></a> and
tell it to rename the variable name <code class="docutils literal notranslate"><span class="pre">theta</span></code> to <code class="docutils literal notranslate"><span class="pre">$\theta$</span></code>, like so:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="kn">import</span> <span class="nn">arviz.labels</span> <span class="k">as</span> <span class="nn">azl</span>
<span class="gp">   ...: </span><span class="n">labeller</span> <span class="o">=</span> <span class="n">azl</span><span class="o">.</span><span class="n">MapLabeller</span><span class="p">(</span><span class="n">var_name_map</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;theta&quot;</span><span class="p">:</span> <span class="sa">r</span><span class="s2">&quot;$\theta$&quot;</span><span class="p">})</span>
<span class="gp">   ...: </span><span class="n">coords</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;school&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Deerfield&quot;</span><span class="p">,</span> <span class="s2">&quot;Hotchkiss&quot;</span><span class="p">,</span> <span class="s2">&quot;Lawrenceville&quot;</span><span class="p">]}</span>
<span class="gp">   ...: </span>

<span class="gp">In [4]: </span><span class="n">az</span><span class="o">.</span><span class="n">plot_posterior</span><span class="p">(</span><span class="n">schools</span><span class="p">,</span> <span class="n">var_names</span><span class="o">=</span><span class="s2">&quot;theta&quot;</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span> <span class="n">labeller</span><span class="o">=</span><span class="n">labeller</span><span class="p">,</span> <span class="n">ref_val</span><span class="o">=</span><span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
<img alt="../_images/label_guide_plot_posterior.png" src="../_images/label_guide_plot_posterior.png" />
<p>You can see the labellers available in ArviZ at <a class="reference internal" href="../api/plot_utils.html#labeller-api"><span class="std std-ref">their API reference page</span></a>.
Their names aim to be descriptive and they all have examples in their docstring.
For further customization continue reading this guide.</p>
</div>
<div class="section" id="sorting-labels">
<h2>Sorting labels<a class="headerlink" href="#sorting-labels" title="Permalink to this headline">¶</a></h2>
<p>Labels in ArviZ can generally be sorted in two ways,
using the arguments passed to ArviZ plotting functions or
sorting the underlying xarray Dataset.
The first one is more convenient for single time ordering
whereas the second is better if you want plots consistenly sorted that way and
is also more flexible, using ArviZ args is more limited.</p>
<p>Both alternatives have an important limitation though.
Multidimension variables are always together.
We can sort <code class="docutils literal notranslate"><span class="pre">theta,</span> <span class="pre">mu,</span> <span class="pre">tau</span></code> in any order, and within <code class="docutils literal notranslate"><span class="pre">theta</span></code> we can sort the schools in any order,
but it’s not possible to show half the schools, then <code class="docutils literal notranslate"><span class="pre">mu</span></code> and <code class="docutils literal notranslate"><span class="pre">tau</span></code> and then the rest of the schools.</p>
<div class="section" id="sorting-variable-names">
<h3>Sorting variable names<a class="headerlink" href="#sorting-variable-names" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">var_order</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;theta&quot;</span><span class="p">,</span> <span class="s2">&quot;mu&quot;</span><span class="p">,</span> <span class="s2">&quot;tau&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="tabbed-set docutils">
<input checked="checked" id="e0440b50-f458-4dea-bd85-0967a13a5e7e" name="9a4b2138-4e2b-4f80-a6af-ae5d8acd3d30" type="radio">
</input><label class="tabbed-label" for="e0440b50-f458-4dea-bd85-0967a13a5e7e">
ArviZ args</label><div class="tabbed-content docutils">
<p>We can pass a list with the variable names sorted to modify the order in which they appear
when calling ArviZ functions</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">az</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">schools</span><span class="p">,</span> <span class="n">var_names</span><span class="o">=</span><span class="n">var_order</span><span class="p">)</span>
<span class="gh">Out[6]: </span><span class="go"></span>
<span class="go">                          mean     sd  hdi_3%  ...  ess_bulk  ess_tail  r_hat</span>
<span class="go">theta[Choate]            6.026  5.782  -3.707  ...     348.0     743.0   1.02</span>
<span class="go">theta[Deerfield]         4.724  4.736  -4.039  ...     471.0    1018.0   1.02</span>
<span class="go">theta[Phillips Andover]  3.576  5.559  -6.779  ...     463.0     674.0   1.01</span>
<span class="go">theta[Phillips Exeter]   4.478  4.939  -5.528  ...     503.0     666.0   1.01</span>
<span class="go">theta[Hotchkiss]         3.064  4.642  -5.972  ...     380.0     833.0   1.02</span>
<span class="go">theta[Lawrenceville]     3.821  4.979  -5.507  ...     516.0    1104.0   1.02</span>
<span class="go">theta[St. Paul&#39;s]        6.250  5.436  -3.412  ...     402.0    1026.0   1.02</span>
<span class="go">theta[Mt. Hermon]        4.544  5.521  -5.665  ...     449.0    1084.0   1.01</span>
<span class="go">mu                       4.093  3.372  -2.118  ...     250.0     643.0   1.03</span>
<span class="go">tau                      4.089  3.001   0.569  ...      79.0      54.0   1.07</span>

<span class="go">[10 rows x 9 columns]</span>
</pre></div>
</div>
</div>
<input id="02443acc-051f-4a06-9d9e-dff44e579808" name="9a4b2138-4e2b-4f80-a6af-ae5d8acd3d30" type="radio">
</input><label class="tabbed-label" for="02443acc-051f-4a06-9d9e-dff44e579808">
xarray</label><div class="tabbed-content docutils">
<p>In xarray, subsetting the Datset with a sorted list of variable names will order the Dataset.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">schools</span><span class="o">.</span><span class="n">posterior</span> <span class="o">=</span> <span class="n">schools</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="n">var_order</span><span class="p">]</span>
<span class="gp">   ...: </span><span class="n">az</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">schools</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gh">Out[7]: </span><span class="go"></span>
<span class="go">                          mean     sd  hdi_3%  ...  ess_bulk  ess_tail  r_hat</span>
<span class="go">theta[Choate]            6.026  5.782  -3.707  ...     348.0     743.0   1.02</span>
<span class="go">theta[Deerfield]         4.724  4.736  -4.039  ...     471.0    1018.0   1.02</span>
<span class="go">theta[Phillips Andover]  3.576  5.559  -6.779  ...     463.0     674.0   1.01</span>
<span class="go">theta[Phillips Exeter]   4.478  4.939  -5.528  ...     503.0     666.0   1.01</span>
<span class="go">theta[Hotchkiss]         3.064  4.642  -5.972  ...     380.0     833.0   1.02</span>
<span class="go">theta[Lawrenceville]     3.821  4.979  -5.507  ...     516.0    1104.0   1.02</span>
<span class="go">theta[St. Paul&#39;s]        6.250  5.436  -3.412  ...     402.0    1026.0   1.02</span>
<span class="go">theta[Mt. Hermon]        4.544  5.521  -5.665  ...     449.0    1084.0   1.01</span>
<span class="go">mu                       4.093  3.372  -2.118  ...     250.0     643.0   1.03</span>
<span class="go">tau                      4.089  3.001   0.569  ...      79.0      54.0   1.07</span>

<span class="go">[10 rows x 9 columns]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="sorting-coordinate-values">
<h3>Sorting coordinate values<a class="headerlink" href="#sorting-coordinate-values" title="Permalink to this headline">¶</a></h3>
<p>We may also want to sort the schools by their mean.
To do so we first have to get the means of each school:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">school_means</span> <span class="o">=</span> <span class="n">schools</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="s2">&quot;theta&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">((</span><span class="s2">&quot;chain&quot;</span><span class="p">,</span> <span class="s2">&quot;draw&quot;</span><span class="p">))</span>
<span class="gp">   ...: </span><span class="n">school_means</span>
<span class="gp">   ...: </span>
<span class="gh">Out[8]: </span><span class="go"></span>
<span class="go">&lt;xarray.DataArray &#39;theta&#39; (school: 8)&gt;</span>
<span class="go">array([6.02582947, 4.72414999, 3.57636428, 4.47778158, 3.06403605,</span>
<span class="go">       3.82103202, 6.25017863, 4.54440944])</span>
<span class="go">Coordinates:</span>
<span class="go">  * school   (school) object &#39;Choate&#39; &#39;Deerfield&#39; ... &quot;St. Paul&#39;s&quot; &#39;Mt. Hermon&#39;</span>
</pre></div>
</div>
<p>We can then use this DataArray result to sort the coordinate values for <code class="docutils literal notranslate"><span class="pre">theta</span></code>.
Again we have two alternatives:</p>
<div class="tabbed-set docutils">
<input checked="checked" id="8f9e837e-45cc-4cd1-ba21-7ac30952192a" name="9207b433-e14b-4706-87c3-0d06fa610da1" type="radio">
</input><label class="tabbed-label" for="8f9e837e-45cc-4cd1-ba21-7ac30952192a">
ArviZ args</label><div class="tabbed-content docutils">
<p>Here the first step is to sort the coordinate values so we can pass them as <cite>coords</cite> argument and
choose the order of the rows.
If we want to manually sort the schools, <cite>sorted_schools</cite> can be defined straight away as a list</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">sorted_schools</span> <span class="o">=</span> <span class="n">schools</span><span class="o">.</span><span class="n">posterior</span><span class="p">[</span><span class="s2">&quot;school&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sortby</span><span class="p">(</span><span class="n">school_means</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">az</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">schools</span><span class="p">,</span> <span class="n">var_names</span><span class="o">=</span><span class="s2">&quot;theta&quot;</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;school&quot;</span><span class="p">:</span> <span class="n">sorted_schools</span><span class="p">})</span>
<span class="gp">   ...: </span>
<span class="gh">Out[9]: </span><span class="go"></span>
<span class="go">                          mean     sd  hdi_3%  ...  ess_bulk  ess_tail  r_hat</span>
<span class="go">theta[Hotchkiss]         3.064  4.642  -5.972  ...     380.0     833.0   1.02</span>
<span class="go">theta[Phillips Andover]  3.576  5.559  -6.779  ...     463.0     674.0   1.01</span>
<span class="go">theta[Lawrenceville]     3.821  4.979  -5.507  ...     516.0    1104.0   1.02</span>
<span class="go">theta[Phillips Exeter]   4.478  4.939  -5.528  ...     503.0     666.0   1.01</span>
<span class="go">theta[Mt. Hermon]        4.544  5.521  -5.665  ...     449.0    1084.0   1.01</span>
<span class="go">theta[Deerfield]         4.724  4.736  -4.039  ...     471.0    1018.0   1.02</span>
<span class="go">theta[Choate]            6.026  5.782  -3.707  ...     348.0     743.0   1.02</span>
<span class="go">theta[St. Paul&#39;s]        6.250  5.436  -3.412  ...     402.0    1026.0   1.02</span>

<span class="go">[8 rows x 9 columns]</span>
</pre></div>
</div>
</div>
<input id="46cfd37f-2a84-4fe6-8340-783d2c514be4" name="9207b433-e14b-4706-87c3-0d06fa610da1" type="radio">
</input><label class="tabbed-label" for="46cfd37f-2a84-4fe6-8340-783d2c514be4">
xarray</label><div class="tabbed-content docutils">
<p>We can use the <a class="reference external" href="http://xarray.pydata.org/en/stable/generated/xarray.Dataset.sortby.html#xarray.Dataset.sortby" title="(in xarray v0.17.1.dev0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sortby()</span></code></a> method to order our coordinate values straight at the source</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">schools</span><span class="o">.</span><span class="n">posterior</span> <span class="o">=</span> <span class="n">schools</span><span class="o">.</span><span class="n">posterior</span><span class="o">.</span><span class="n">sortby</span><span class="p">(</span><span class="n">school_means</span><span class="p">)</span>
<span class="gp">   ....: </span><span class="n">az</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">schools</span><span class="p">,</span> <span class="n">var_names</span><span class="o">=</span><span class="s2">&quot;theta&quot;</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="gh">Out[10]: </span><span class="go"></span>
<span class="go">                          mean     sd  hdi_3%  ...  ess_bulk  ess_tail  r_hat</span>
<span class="go">theta[Hotchkiss]         3.064  4.642  -5.972  ...     380.0     833.0   1.02</span>
<span class="go">theta[Phillips Andover]  3.576  5.559  -6.779  ...     463.0     674.0   1.01</span>
<span class="go">theta[Lawrenceville]     3.821  4.979  -5.507  ...     516.0    1104.0   1.02</span>
<span class="go">theta[Phillips Exeter]   4.478  4.939  -5.528  ...     503.0     666.0   1.01</span>
<span class="go">theta[Mt. Hermon]        4.544  5.521  -5.665  ...     449.0    1084.0   1.01</span>
<span class="go">theta[Deerfield]         4.724  4.736  -4.039  ...     471.0    1018.0   1.02</span>
<span class="go">theta[Choate]            6.026  5.782  -3.707  ...     348.0     743.0   1.02</span>
<span class="go">theta[St. Paul&#39;s]        6.250  5.436  -3.412  ...     402.0    1026.0   1.02</span>

<span class="go">[8 rows x 9 columns]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="sorting-dimensions">
<h3>Sorting dimensions<a class="headerlink" href="#sorting-dimensions" title="Permalink to this headline">¶</a></h3>
<p>In some cases, our multidimensinal variables may not have only a length <code class="docutils literal notranslate"><span class="pre">n</span></code> dimension
(in addition to the <code class="docutils literal notranslate"><span class="pre">chain</span></code> and <code class="docutils literal notranslate"><span class="pre">draw</span></code> ones)
but could also have multiple dimensions.
Let’s imagine we have performed a set of fixed experiments on several days to multiple subjects,
three data dimensions overall.</p>
<p>We will create a fake inference data with data mimicking this situation to show how to sort dimensions.
To keep things short and not clutter the guide too much with unnecessary output lines,
we will stick to a posterior of a single variable and the dimension sizes will be <code class="docutils literal notranslate"><span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">default_rng</span>
<span class="gp">   ....: </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">   ....: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">default_rng</span><span class="p">()</span>
<span class="gp">   ....: </span><span class="n">samples</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">   ....: </span><span class="n">coords</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;subject&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ecoli&quot;</span><span class="p">,</span> <span class="s2">&quot;pseudomonas&quot;</span><span class="p">,</span> <span class="s2">&quot;clostridium&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;1-3-2020&quot;</span><span class="p">,</span> <span class="s2">&quot;2-4-2020&quot;</span><span class="p">,</span> <span class="s2">&quot;1-5-2020&quot;</span><span class="p">,</span> <span class="s2">&quot;1-6-2020&quot;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="s2">&quot;experiment&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">   ....: </span><span class="p">}</span>
<span class="gp">   ....: </span><span class="n">experiments</span> <span class="o">=</span> <span class="n">az</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">posterior</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">samples</span><span class="p">},</span> <span class="n">dims</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;experiment&quot;</span><span class="p">,</span> <span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">]},</span> <span class="n">coords</span><span class="o">=</span><span class="n">coords</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span><span class="n">experiments</span><span class="o">.</span><span class="n">posterior</span>
<span class="gp">   ....: </span>
<span class="gh">Out[11]: </span><span class="go"></span>
<span class="go">&lt;xarray.Dataset&gt;</span>
<span class="go">Dimensions:     (chain: 4, date: 4, draw: 500, experiment: 2, subject: 3)</span>
<span class="go">Coordinates:</span>
<span class="go">  * chain       (chain) int64 0 1 2 3</span>
<span class="go">  * draw        (draw) int64 0 1 2 3 4 5 6 7 ... 492 493 494 495 496 497 498 499</span>
<span class="go">  * experiment  (experiment) int64 1 2</span>
<span class="go">  * subject     (subject) &lt;U11 &#39;ecoli&#39; &#39;pseudomonas&#39; &#39;clostridium&#39;</span>
<span class="go">  * date        (date) &lt;U8 &#39;1-3-2020&#39; &#39;2-4-2020&#39; &#39;1-5-2020&#39; &#39;1-6-2020&#39;</span>
<span class="go">Data variables:</span>
<span class="go">    b           (chain, draw, experiment, subject, date) float64 -0.8596 ... ...</span>
<span class="go">Attributes:</span>
<span class="go">    created_at:     2021-03-23T17:38:37.787496</span>
<span class="go">    arviz_version:  0.11.2</span>
</pre></div>
</div>
<p>Given how we have constructed our dataset, the default order is <code class="docutils literal notranslate"><span class="pre">experiment,</span> <span class="pre">subject,</span> <span class="pre">date</span></code></p>
<details class="sphinx-bs dropdown card mb-3">
<summary class="summary-title card-header">
Click to see the default summary<div class="summary-down docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="summary-up docutils">
<svg version="1.1" width="24" height="24" class="octicon octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="summary-content card-body docutils">
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">az</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">experiments</span><span class="p">)</span>
<span class="gh">Out[12]: </span><span class="go"></span>
<span class="go">                              mean     sd  hdi_3%  ...  ess_bulk  ess_tail  r_hat</span>
<span class="go">b[1, ecoli, 1-3-2020]        0.002  0.997  -1.875  ...    2022.0    2001.0    1.0</span>
<span class="go">b[1, ecoli, 2-4-2020]       -0.011  1.004  -1.807  ...    1695.0    1917.0    1.0</span>
<span class="go">b[1, ecoli, 1-5-2020]        0.047  1.012  -1.750  ...    1889.0    1768.0    1.0</span>
<span class="go">b[1, ecoli, 1-6-2020]        0.011  0.991  -1.804  ...    1872.0    1781.0    1.0</span>
<span class="go">b[1, pseudomonas, 1-3-2020] -0.043  0.976  -1.887  ...    2032.0    1925.0    1.0</span>
<span class="go">b[1, pseudomonas, 2-4-2020] -0.022  1.013  -1.779  ...    2093.0    1973.0    1.0</span>
<span class="go">b[1, pseudomonas, 1-5-2020]  0.007  0.975  -1.734  ...    2024.0    1832.0    1.0</span>
<span class="go">b[1, pseudomonas, 1-6-2020]  0.018  1.004  -1.988  ...    1817.0    1903.0    1.0</span>
<span class="go">b[1, clostridium, 1-3-2020] -0.025  1.020  -2.092  ...    1993.0    2015.0    1.0</span>
<span class="go">b[1, clostridium, 2-4-2020] -0.006  0.990  -1.808  ...    1963.0    1933.0    1.0</span>
<span class="go">b[1, clostridium, 1-5-2020]  0.025  0.980  -1.884  ...    1928.0    2006.0    1.0</span>
<span class="go">b[1, clostridium, 1-6-2020] -0.003  0.986  -1.787  ...    2055.0    1799.0    1.0</span>
<span class="go">b[2, ecoli, 1-3-2020]        0.002  0.991  -2.014  ...    1848.0    2010.0    1.0</span>
<span class="go">b[2, ecoli, 2-4-2020]        0.014  1.013  -1.944  ...    2018.0    1805.0    1.0</span>
<span class="go">b[2, ecoli, 1-5-2020]        0.042  1.005  -1.921  ...    1987.0    1892.0    1.0</span>
<span class="go">b[2, ecoli, 1-6-2020]       -0.003  0.980  -1.920  ...    2055.0    1812.0    1.0</span>
<span class="go">b[2, pseudomonas, 1-3-2020]  0.005  1.007  -1.771  ...    2059.0    1857.0    1.0</span>
<span class="go">b[2, pseudomonas, 2-4-2020]  0.013  1.014  -1.880  ...    1956.0    1820.0    1.0</span>
<span class="go">b[2, pseudomonas, 1-5-2020]  0.019  0.991  -1.829  ...    2059.0    2001.0    1.0</span>
<span class="go">b[2, pseudomonas, 1-6-2020] -0.021  1.021  -1.882  ...    1893.0    1906.0    1.0</span>
<span class="go">b[2, clostridium, 1-3-2020] -0.000  1.000  -1.860  ...    1902.0    1968.0    1.0</span>
<span class="go">b[2, clostridium, 2-4-2020]  0.002  1.019  -2.032  ...    1957.0    1777.0    1.0</span>
<span class="go">b[2, clostridium, 1-5-2020] -0.034  0.995  -1.841  ...    2062.0    1973.0    1.0</span>
<span class="go">b[2, clostridium, 1-6-2020] -0.039  0.998  -1.948  ...    2122.0    1956.0    1.0</span>

<span class="go">[24 rows x 9 columns]</span>
</pre></div>
</div>
</div>
</details><p>Hovever, we actually want to have the dimensions in this order: <code class="docutils literal notranslate"><span class="pre">subject,</span> <span class="pre">date,</span> <span class="pre">experiment</span></code>.
And in this case, we need to modify the underlying xarray object in order to get the desired result:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">dim_order</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;chain&quot;</span><span class="p">,</span> <span class="s2">&quot;draw&quot;</span><span class="p">,</span> <span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="s2">&quot;experiment&quot;</span><span class="p">)</span>

<span class="gp">In [14]: </span><span class="n">experiments</span> <span class="o">=</span> <span class="n">experiments</span><span class="o">.</span><span class="n">posterior</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="o">*</span><span class="n">dim_order</span><span class="p">)</span>

<span class="gp">In [15]: </span><span class="n">az</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">experiments</span><span class="p">)</span>
<span class="gh">Out[15]: </span><span class="go"></span>
<span class="go">                              mean     sd  hdi_3%  ...  ess_bulk  ess_tail  r_hat</span>
<span class="go">b[ecoli, 1-3-2020, 1]        0.002  0.997  -1.875  ...    2022.0    2001.0    1.0</span>
<span class="go">b[ecoli, 1-3-2020, 2]        0.002  0.991  -2.014  ...    1848.0    2010.0    1.0</span>
<span class="go">b[ecoli, 2-4-2020, 1]       -0.011  1.004  -1.807  ...    1695.0    1917.0    1.0</span>
<span class="go">b[ecoli, 2-4-2020, 2]        0.014  1.013  -1.944  ...    2018.0    1805.0    1.0</span>
<span class="go">b[ecoli, 1-5-2020, 1]        0.047  1.012  -1.750  ...    1889.0    1768.0    1.0</span>
<span class="go">b[ecoli, 1-5-2020, 2]        0.042  1.005  -1.921  ...    1987.0    1892.0    1.0</span>
<span class="go">b[ecoli, 1-6-2020, 1]        0.011  0.991  -1.804  ...    1872.0    1781.0    1.0</span>
<span class="go">b[ecoli, 1-6-2020, 2]       -0.003  0.980  -1.920  ...    2055.0    1812.0    1.0</span>
<span class="go">b[pseudomonas, 1-3-2020, 1] -0.043  0.976  -1.887  ...    2032.0    1925.0    1.0</span>
<span class="go">b[pseudomonas, 1-3-2020, 2]  0.005  1.007  -1.771  ...    2059.0    1857.0    1.0</span>
<span class="go">b[pseudomonas, 2-4-2020, 1] -0.022  1.013  -1.779  ...    2093.0    1973.0    1.0</span>
<span class="go">b[pseudomonas, 2-4-2020, 2]  0.013  1.014  -1.880  ...    1956.0    1820.0    1.0</span>
<span class="go">b[pseudomonas, 1-5-2020, 1]  0.007  0.975  -1.734  ...    2024.0    1832.0    1.0</span>
<span class="go">b[pseudomonas, 1-5-2020, 2]  0.019  0.991  -1.829  ...    2059.0    2001.0    1.0</span>
<span class="go">b[pseudomonas, 1-6-2020, 1]  0.018  1.004  -1.988  ...    1817.0    1903.0    1.0</span>
<span class="go">b[pseudomonas, 1-6-2020, 2] -0.021  1.021  -1.882  ...    1893.0    1906.0    1.0</span>
<span class="go">b[clostridium, 1-3-2020, 1] -0.025  1.020  -2.092  ...    1993.0    2015.0    1.0</span>
<span class="go">b[clostridium, 1-3-2020, 2] -0.000  1.000  -1.860  ...    1902.0    1968.0    1.0</span>
<span class="go">b[clostridium, 2-4-2020, 1] -0.006  0.990  -1.808  ...    1963.0    1933.0    1.0</span>
<span class="go">b[clostridium, 2-4-2020, 2]  0.002  1.019  -2.032  ...    1957.0    1777.0    1.0</span>
<span class="go">b[clostridium, 1-5-2020, 1]  0.025  0.980  -1.884  ...    1928.0    2006.0    1.0</span>
<span class="go">b[clostridium, 1-5-2020, 2] -0.034  0.995  -1.841  ...    2062.0    1973.0    1.0</span>
<span class="go">b[clostridium, 1-6-2020, 1] -0.003  0.986  -1.787  ...    2055.0    1799.0    1.0</span>
<span class="go">b[clostridium, 1-6-2020, 2] -0.039  0.998  -1.948  ...    2122.0    1956.0    1.0</span>

<span class="go">[24 rows x 9 columns]</span>
</pre></div>
</div>
<p>Note however that we don’t need to overwrite or store the modified xarray object.
Doing <code class="docutils literal notranslate"><span class="pre">az.summary(experiments.posterior.transpose(*dim_order))</span></code> would work just the same
if we only want to use this order once.</p>
</div>
</div>
<div class="section" id="labeling-with-indexes">
<h2>Labeling with indexes<a class="headerlink" href="#labeling-with-indexes" title="Permalink to this headline">¶</a></h2>
<p>As you may have seen, there are labellers with <code class="docutils literal notranslate"><span class="pre">Idx</span></code> in their name:
<a class="reference internal" href="../api/generated/arviz.labels.IdxLabeller.html#arviz.labels.IdxLabeller" title="arviz.labels.IdxLabeller"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdxLabeller</span></code></a> and  <a class="reference internal" href="../api/generated/arviz.labels.DimIdxLabeller.html#arviz.labels.DimIdxLabeller" title="arviz.labels.DimIdxLabeller"><code class="xref py py-class docutils literal notranslate"><span class="pre">DimIdxLabeller</span></code></a>,
which show the positional index of the values instead of their corresponding coordinate value.</p>
<p>We have seen before that we can use the <code class="docutils literal notranslate"><span class="pre">coords</span></code> argument or
the <a class="reference internal" href="../api/generated/arviz.InferenceData.sel.html#arviz.InferenceData.sel" title="arviz.InferenceData.sel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sel()</span></code></a> method to select data based on the coordinate values.
Similarly, we can use the <a class="reference internal" href="../api/generated/arviz.InferenceData.isel.html#arviz.InferenceData.isel" title="arviz.InferenceData.isel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isel()</span></code></a> method to select data based on positional indexes.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">az</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">schools</span><span class="p">,</span> <span class="n">labeller</span><span class="o">=</span><span class="n">azl</span><span class="o">.</span><span class="n">IdxLabeller</span><span class="p">())</span>
<span class="gh">Out[16]: </span><span class="go"></span>
<span class="go">           mean     sd  hdi_3%  hdi_97%  ...  mcse_sd  ess_bulk  ess_tail  r_hat</span>
<span class="go">theta[0]  3.064  4.642  -5.972   11.547  ...    0.166     380.0     833.0   1.02</span>
<span class="go">theta[1]  3.576  5.559  -6.779   13.838  ...    0.175     463.0     674.0   1.01</span>
<span class="go">theta[2]  3.821  4.979  -5.507   13.232  ...    0.150     516.0    1104.0   1.02</span>
<span class="go">theta[3]  4.478  4.939  -5.528   13.392  ...    0.141     503.0     666.0   1.01</span>
<span class="go">theta[4]  4.544  5.521  -5.665   15.266  ...    0.163     449.0    1084.0   1.01</span>
<span class="go">theta[5]  4.724  4.736  -4.039   13.999  ...    0.142     471.0    1018.0   1.02</span>
<span class="go">theta[6]  6.026  5.782  -3.707   17.337  ...    0.206     348.0     743.0   1.02</span>
<span class="go">theta[7]  6.250  5.436  -3.412   16.920  ...    0.168     402.0    1026.0   1.02</span>
<span class="go">mu        4.093  3.372  -2.118   10.403  ...    0.152     250.0     643.0   1.03</span>
<span class="go">tau       4.089  3.001   0.569    9.386  ...    0.178      79.0      54.0   1.07</span>

<span class="go">[10 rows x 9 columns]</span>
</pre></div>
</div>
<p>After seeing this summary, we use <code class="docutils literal notranslate"><span class="pre">isel</span></code> to generate the summary of a subset only.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [17]: </span><span class="n">az</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">schools</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">school</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]),</span> <span class="n">labeller</span><span class="o">=</span><span class="n">azl</span><span class="o">.</span><span class="n">IdxLabeller</span><span class="p">())</span>
<span class="gh">Out[17]: </span><span class="go"></span>
<span class="go">           mean     sd  hdi_3%  hdi_97%  ...  mcse_sd  ess_bulk  ess_tail  r_hat</span>
<span class="go">theta[0]  3.821  4.979  -5.507   13.232  ...    0.150     516.0    1104.0   1.02</span>
<span class="go">theta[1]  4.724  4.736  -4.039   13.999  ...    0.142     471.0    1018.0   1.02</span>
<span class="go">theta[2]  6.250  5.436  -3.412   16.920  ...    0.168     402.0    1026.0   1.02</span>
<span class="go">mu        4.093  3.372  -2.118   10.403  ...    0.152     250.0     643.0   1.03</span>
<span class="go">tau       4.089  3.001   0.569    9.386  ...    0.178      79.0      54.0   1.07</span>

<span class="go">[5 rows x 9 columns]</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Positional indexing is NOT label based indexing with numbers!</p>
</div>
<p>The positional indexes shown will correspond to the ordinal position <em>in the subsetted object</em>.
If you are not subsetting the object, you can use these indexes with <code class="docutils literal notranslate"><span class="pre">isel</span></code> without problem.
However, if you are subsetting the data (either directly or with the <code class="docutils literal notranslate"><span class="pre">coords</span></code> argument)
and want to use the positional indexes shown, you need to use them on the corresponding subset.</p>
<p>An example. If you use a dict named <code class="docutils literal notranslate"><span class="pre">coords</span></code> when calling a plotting function,
for <code class="docutils literal notranslate"><span class="pre">isel</span></code> to work it has to be called on
<code class="docutils literal notranslate"><span class="pre">original_idata.sel(**coords).isel(&lt;desired</span> <span class="pre">positional</span> <span class="pre">idxs&gt;)</span></code> and
not on <code class="docutils literal notranslate"><span class="pre">original_idata.isel(&lt;desired</span> <span class="pre">positional</span> <span class="pre">idxs&gt;)</span></code></p>
</div>
<div class="section" id="labeller-mixtures">
<h2>Labeller mixtures<a class="headerlink" href="#labeller-mixtures" title="Permalink to this headline">¶</a></h2>
<p>In some cases, none of the available labellers will do the right job.
One case where this is bound to happen is with <code class="docutils literal notranslate"><span class="pre">plot_forest</span></code>.
When setting <code class="docutils literal notranslate"><span class="pre">legend=True</span></code> it does not really make sense to add the model name to the tick labels.
<code class="docutils literal notranslate"><span class="pre">plot_forest</span></code> knows that, and if no <code class="docutils literal notranslate"><span class="pre">labeller</span></code> is passed, it uses either
<a class="reference internal" href="../api/generated/arviz.labels.BaseLabeller.html#arviz.labels.BaseLabeller" title="arviz.labels.BaseLabeller"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseLabeller</span></code></a> or <a class="reference internal" href="../api/generated/arviz.labels.NoModelLabeller.html#arviz.labels.NoModelLabeller" title="arviz.labels.NoModelLabeller"><code class="xref py py-class docutils literal notranslate"><span class="pre">NoModelLabeller</span></code></a> depending on the value of <code class="docutils literal notranslate"><span class="pre">legend</span></code>.
If we do want to use the <code class="docutils literal notranslate"><span class="pre">labeller</span></code> argument however, we have to make sure to enforce this default ourselves:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">schools2</span> <span class="o">=</span> <span class="n">az</span><span class="o">.</span><span class="n">load_arviz_data</span><span class="p">(</span><span class="s2">&quot;non_centered_eight&quot;</span><span class="p">)</span>

<span class="gp">In [19]: </span><span class="n">az</span><span class="o">.</span><span class="n">plot_forest</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">(</span><span class="n">schools</span><span class="p">,</span> <span class="n">schools2</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="n">model_names</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;centered&quot;</span><span class="p">,</span> <span class="s2">&quot;non_centered&quot;</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;school&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Deerfield&quot;</span><span class="p">,</span> <span class="s2">&quot;Lawrenceville&quot;</span><span class="p">,</span> <span class="s2">&quot;Mt. Hermon&quot;</span><span class="p">]},</span>
<span class="gp">   ....: </span>    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="n">labeller</span><span class="o">=</span><span class="n">azl</span><span class="o">.</span><span class="n">DimCoordLabeller</span><span class="p">(),</span>
<span class="gp">   ....: </span>    <span class="n">legend</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">   ....: </span><span class="p">);</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<img alt="../_images/default_plot_forest.png" src="../_images/default_plot_forest.png" />
<p>There is a lot of repeated information now.
The variable names, dims and coords are shown for both models and
the models are labeled both in the legend and in the labels of the y axis.
For cases like this, ArviZ provides a convenience function <a class="reference internal" href="../api/generated/arviz.labels.mix_labellers.html#arviz.labels.mix_labellers" title="arviz.labels.mix_labellers"><code class="xref py py-func docutils literal notranslate"><span class="pre">mix_labellers()</span></code></a>
that combines labeller classes for some extra customization.
Labeller classes aim to split labeling into atomic tasks and have a method per task to maximize extensibility.
Thus, many new labellers can be created with this mixer function alone without needing to write a new class from scratch.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="n">MixtureLabeller</span> <span class="o">=</span> <span class="n">azl</span><span class="o">.</span><span class="n">mix_labellers</span><span class="p">((</span><span class="n">azl</span><span class="o">.</span><span class="n">DimCoordLabeller</span><span class="p">,</span> <span class="n">azl</span><span class="o">.</span><span class="n">NoModelLabeller</span><span class="p">))</span>

<span class="gp">In [21]: </span><span class="n">az</span><span class="o">.</span><span class="n">plot_forest</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">(</span><span class="n">schools</span><span class="p">,</span> <span class="n">schools2</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="n">model_names</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;centered&quot;</span><span class="p">,</span> <span class="s2">&quot;non_centered&quot;</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;school&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Deerfield&quot;</span><span class="p">,</span> <span class="s2">&quot;Lawrenceville&quot;</span><span class="p">,</span> <span class="s2">&quot;Mt. Hermon&quot;</span><span class="p">]},</span>
<span class="gp">   ....: </span>    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="n">labeller</span><span class="o">=</span><span class="n">MixtureLabeller</span><span class="p">(),</span>
<span class="gp">   ....: </span>    <span class="n">legend</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">   ....: </span><span class="p">);</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<img alt="../_images/mixture_plot_forest.png" src="../_images/mixture_plot_forest.png" />
</div>
<div class="section" id="custom-labellers">
<h2>Custom labellers<a class="headerlink" href="#custom-labellers" title="Permalink to this headline">¶</a></h2>
<p>Section in construction…</p>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="data_structures.html" title="previous page">Data structures</a>
    <a class='right-next' id="next-link" href="../schema/schema.html" title="next page">InferenceData schema specification</a>

              </div>
              
          </main>
          
  


      </div>
    </div>

    
  <script src="../_static/js/index.1e043a052b0af929e4d8.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2018, ArviZ devs.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>